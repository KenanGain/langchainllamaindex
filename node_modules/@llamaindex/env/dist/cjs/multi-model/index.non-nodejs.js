"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    loadTransformers: function() {
        return loadTransformers;
    },
    setTransformers: function() {
        return _shared.setTransformers;
    }
});
const _shared = require("./shared.js");
async function loadTransformers(onLoad) {
    if ((0, _shared.getTransformers)() === null) {
        /**
     * If you see this warning, it means that the current environment does not support the transformer.
     *  because "@xeonva/transformers" highly depends on Node.js APIs.
     *
     * One possible solution is to fix their implementation to make it work in the non-Node.js environment,
     *  but it's not worth the effort because Edge Runtime and Cloudflare Workers are not the for heavy Machine Learning task.
     *
     * Or you can provide an RPC server that runs the transformer in a Node.js environment.
     * Or you just run the code in a Node.js environment.
     *
     * Refs: https://github.com/xenova/transformers.js/issues/309
     */ console.warn('"@xenova/transformers" is not officially supported in this environment, some features may not work as expected.');
        (0, _shared.setTransformers)(// @ts-expect-error
        await import("@xenova/transformers/dist/transformers"));
    } else {
        return (0, _shared.getTransformers)();
    }
    const transformer = (0, _shared.getTransformers)();
    onLoad(transformer);
    return transformer;
}
